

<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Android With Webserver PHP Ivans Ardiansyah</title>
    <meta name="author" content="Ivans Ardiansyah">
    
    <meta name="description" content="Android With Webserver PHP Feb 14th, 2014 &nbsp;android &nbsp;php Membuat aplikasi android dengan webserver menggunakan php. 1 Buat Database &hellip;">
    
    <meta name="viewport" content="width=device-width">
    
    <link rel="canonical" href="http://ivansa.github.io/android/php/android-with-webserver-php">
    <link href="/favicon.ico" rel="icon">
    <link href='//fonts.googleapis.com/css?family=Ruluko' rel='stylesheet'>
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="//atom.xml" rel="alternate" title="Ivans Ardiansyah" type="application/atom+xml">
    <style>
      body {
        font-family: 'Ruluko';font-size: 22px;
      }
    </style>
    
	<meta property="fb:app_id" content="597527150322328" />
	
  </head>


  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item two-fifths lap-four-sixths palm-one-whole">
  <a href="/" class="site-title">Ivans Ardiansyah</a>
</div>

<div class="grid__item three-fifths lap-two-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/">Blog</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="post">
  <header>
  
  <h2 class="title indent">Android With Webserver PHP</h2>
  

  
  <div class="meta clearfix">
    








  


<time class="pull-left" datetime="2014-02-14T08:41:00+07:00" pubdate data-updated="true"><i class="icon-calendar"></i> Feb 14<span>th</span>, 2014</time>
    



  
  <div class="pull-left">
    
      <li style="float:left;margin-right:1em;"><i class="icon-tags"></i>&nbsp;<a href="/blog/categories/android/">android</a></li>
    
      <li style="float:left;margin-right:1em;"><i class="icon-tags"></i>&nbsp;<a href="/blog/categories/php/">php</a></li>
    
  </div>
  


    
  </div>
  
</header>




  <p>Membuat aplikasi android dengan webserver menggunakan php.</p>

<!--more-->


<h4>1 Buat Database test_android.</h4>

<h4>2 Buat Table users(username, fullname).</h4>

<h4>3 Buat file php :</h4>

<figure class='code'><figcaption><span> (input_data.php)</span> <a href='/downloads/code/android/webserver_php/input_data.php'>download</a></figcaption>
 <div class="highlight"><table><tr><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="c1">//http://localhost:8080/sample1/webservice2.php?json={%22UserName%22:1,%22FullName%22:2}</span>
</span><span class='line'><span class="c1">//$json=$_GET [&#39;json&#39;];</span>
</span><span class='line'><span class="nv">$json</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;php://input&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$obj</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//echo $json;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">//Save</span>
</span><span class='line'><span class="nv">$con</span> <span class="o">=</span> <span class="nb">mysql_connect</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span><span class="s1">&#39;root&#39;</span><span class="p">,</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Cannot connect to the DB&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nb">mysql_select_db</span><span class="p">(</span><span class="s1">&#39;test_android&#39;</span><span class="p">,</span><span class="nv">$con</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* grab the posts from the db */</span>
</span><span class='line'>  <span class="c1">//$query = &quot;SELECT post_title, guid FROM wp_posts WHERE post_author = $user_id AND post_status = &#39;publish&#39; ORDER BY ID DESC LIMIT $number_of_posts&quot;;</span>
</span><span class='line'><span class="nb">mysql_query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (username, fullname)</span>
</span><span class='line'><span class="s2">VALUES (&#39;&quot;</span><span class="o">.</span><span class="nv">$obj</span><span class="o">-&gt;</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">}</span><span class="o">.</span><span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="nv">$obj</span><span class="o">-&gt;</span><span class="p">{</span><span class="s1">&#39;fullname&#39;</span><span class="p">}</span><span class="o">.</span><span class="s2">&quot;&#39;)&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nb">mysql_close</span><span class="p">(</span><span class="nv">$con</span><span class="p">);</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'>  <span class="c1">//$posts = array($json);</span>
</span><span class='line'>  <span class="nv">$posts</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-type: application/json&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;posts&#39;</span><span class="o">=&gt;</span><span class="nv">$posts</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span> (select_table.php)</span> <a href='/downloads/code/android/webserver_php/select_table.php'>download</a></figcaption>
 <div class="highlight"><table><tr><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="cm">/* require the user as the parameter */</span>
</span><span class='line'><span class="c1">//http://localhost:8080/sample1/webservice1.php?user=1</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* soak in the passed variable or set our own */</span>
</span><span class='line'>  <span class="nv">$number_of_posts</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;num&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;num&#39;</span><span class="p">])</span> <span class="o">:</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">//10 is the default</span>
</span><span class='line'>  <span class="nv">$format</span> <span class="o">=</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span> <span class="o">?</span> <span class="s1">&#39;json&#39;</span> <span class="o">:</span> <span class="s1">&#39;xml&#39;</span><span class="p">;</span> <span class="c1">//xml is the default</span>
</span><span class='line'>  <span class="c1">//$user_id = intval($_GET[&#39;user&#39;]); //no default</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* connect to the db */</span>
</span><span class='line'>  <span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysql_connect</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span><span class="s1">&#39;root&#39;</span><span class="p">,</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Cannot connect to the DB&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nb">mysql_select_db</span><span class="p">(</span><span class="s1">&#39;test_android&#39;</span><span class="p">,</span><span class="nv">$link</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Cannot select the DB&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* grab the posts from the db */</span>
</span><span class='line'>  <span class="c1">//$query = &quot;SELECT post_title, guid FROM wp_posts WHERE post_author = $user_id AND post_status = &#39;publish&#39; ORDER BY ID DESC LIMIT $number_of_posts&quot;;</span>
</span><span class='line'>  <span class="nv">$query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM users;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$query</span><span class="p">,</span><span class="nv">$link</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Errant query:  &#39;</span><span class="o">.</span><span class="nv">$query</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* create one master array of the records */</span>
</span><span class='line'>  <span class="nv">$posts</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">while</span><span class="p">(</span><span class="nv">$post</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nv">$posts</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="o">=&gt;</span><span class="nv">$post</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* output in necessary format */</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nv">$format</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-type: application/json&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;posts&#39;</span><span class="o">=&gt;</span><span class="nv">$posts</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-type: text/xml&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s1">&#39;&lt;posts&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">foreach</span><span class="p">(</span><span class="nv">$posts</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$post</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$post</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">foreach</span><span class="p">(</span><span class="nv">$post</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span><span class="nv">$key</span><span class="p">,</span><span class="s1">&#39;&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">foreach</span><span class="p">(</span><span class="nv">$value</span> <span class="k">as</span> <span class="nv">$tag</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">echo</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span><span class="nv">$tag</span><span class="p">,</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$val</span><span class="p">),</span><span class="s1">&#39;&lt;/&#39;</span><span class="p">,</span><span class="nv">$tag</span><span class="p">,</span><span class="s1">&#39;&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s1">&#39;&lt;/&#39;</span><span class="p">,</span><span class="nv">$key</span><span class="p">,</span><span class="s1">&#39;&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s1">&#39;&lt;/posts&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* disconnect from the db */</span>
</span><span class='line'>  <span class="o">@</span><span class="nb">mysql_close</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'> <span class="cp">?&gt;</span><span class="x"> </span>
</span></code></pre></td></tr></table></div></figure>


<h4>4 Buat android project.</h4>

<h4>5 MainActivity.java.</h4>

<figure class='code'><figcaption><span> (MainActivity.java)</span> <a href='/downloads/code/android/webserver_php/MainActivity.java'>download</a></figcaption>
 <div class="highlight"><table><tr><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">ivans</span><span class="o">.</span><span class="na">php</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.HttpEntity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.ResponseHandler</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.entity.UrlEncodedFormEntity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.entity.ByteArrayEntity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.impl.client.BasicResponseHandler</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.NameValuePair</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.message.BasicNameValuePair</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.params.BasicHttpParams</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.json.JSONArray</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.StrictMode</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
</span><span class='line'>  <span class="cm">/** Called when the activity is first created. */</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">TIMEOUT_MILLISEC</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span> <span class="c1">// = 10 seconds</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>          <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="n">StrictMode</span><span class="o">.</span><span class="na">ThreadPolicy</span> <span class="n">policy</span> <span class="o">=</span> <span class="k">new</span>
</span><span class='line'>          <span class="n">StrictMode</span><span class="o">.</span><span class="na">ThreadPolicy</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">permitAll</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>          <span class="n">StrictMode</span><span class="o">.</span><span class="na">setThreadPolicy</span><span class="o">(</span><span class="n">policy</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;Request failed: &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span>
</span><span class='line'>                  <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clickbuttonSent</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
</span><span class='line'>          <span class="n">json</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="s">&quot;ivans&quot;</span><span class="o">);</span>
</span><span class='line'>          <span class="n">json</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;fullname&quot;</span><span class="o">,</span> <span class="s">&quot;ivans ganteng&quot;</span><span class="o">);</span>
</span><span class='line'>          <span class="n">HttpParams</span> <span class="n">httpParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BasicHttpParams</span><span class="o">();</span>
</span><span class='line'>          <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">httpParams</span><span class="o">,</span>
</span><span class='line'>                  <span class="n">TIMEOUT_MILLISEC</span><span class="o">);</span>
</span><span class='line'>          <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setSoTimeout</span><span class="o">(</span><span class="n">httpParams</span><span class="o">,</span> <span class="n">TIMEOUT_MILLISEC</span><span class="o">);</span>
</span><span class='line'>          <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">(</span><span class="n">httpParams</span><span class="o">);</span>
</span><span class='line'>          <span class="c1">//</span>
</span><span class='line'>          <span class="c1">//String url = &quot;http://10.0.2.2:8080/sample1/webservice2.php?json={\&quot;UserName\&quot;:1,\&quot;FullName\&quot;:2}&quot;;</span>
</span><span class='line'>          <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://192.168.0.103/webservice2.php&quot;</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">HttpPost</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span><span class='line'>          <span class="n">request</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="k">new</span> <span class="n">ByteArrayEntity</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">(</span>
</span><span class='line'>                  <span class="s">&quot;UTF8&quot;</span><span class="o">)));</span>
</span><span class='line'>          <span class="n">request</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">&quot;json&quot;</span><span class="o">,</span> <span class="n">json</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span><span class='line'>          <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</span><span class='line'>          <span class="n">HttpEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
</span><span class='line'>          <span class="c1">// If the response does not enclose an entity, there is no need</span>
</span><span class='line'>          <span class="k">if</span> <span class="o">(</span><span class="n">entity</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">InputStream</span> <span class="n">instream</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="na">getContent</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>              <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">StreamConverter</span><span class="o">.</span><span class="na">convertStreamToString</span><span class="o">(</span><span class="n">instream</span><span class="o">);</span>
</span><span class='line'>              <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Read from server&quot;</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
</span><span class='line'>              <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>  <span class="n">result</span><span class="o">,</span>
</span><span class='line'>                      <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;Request failed: &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span>
</span><span class='line'>                  <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clickbuttonRecieve</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="c1">// http://androidarabia.net/quran4android/phpserver/connecttoserver.php</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// Log.i(getClass().getSimpleName(), &quot;send  task - start&quot;);</span>
</span><span class='line'>          <span class="n">HttpParams</span> <span class="n">httpParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BasicHttpParams</span><span class="o">();</span>
</span><span class='line'>          <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">httpParams</span><span class="o">,</span>
</span><span class='line'>                  <span class="n">TIMEOUT_MILLISEC</span><span class="o">);</span>
</span><span class='line'>          <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setSoTimeout</span><span class="o">(</span><span class="n">httpParams</span><span class="o">,</span> <span class="n">TIMEOUT_MILLISEC</span><span class="o">);</span>
</span><span class='line'>          <span class="c1">//</span>
</span><span class='line'>          <span class="n">HttpParams</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BasicHttpParams</span><span class="o">();</span>
</span><span class='line'>          <span class="c1">// p.setParameter(&quot;name&quot;, pvo.getName());</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// Instantiate an HttpClient</span>
</span><span class='line'>          <span class="n">HttpClient</span> <span class="n">httpclient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
</span><span class='line'>          <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://192.168.0.103/webservice1.php?user=1&amp;format=json&quot;</span><span class="o">;</span>
</span><span class='line'>          <span class="n">HttpPost</span> <span class="n">httppost</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// Instantiate a GET HTTP method</span>
</span><span class='line'>          <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">getClass</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">(),</span> <span class="s">&quot;send  task - start&quot;</span><span class="o">);</span>
</span><span class='line'>              
</span><span class='line'>              <span class="c1">//List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(2);</span>
</span><span class='line'>              <span class="c1">//nameValuePairs.add(new BasicNameValuePair(&quot;user&quot;, &quot;1&quot;));</span>
</span><span class='line'>              <span class="c1">//httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));</span>
</span><span class='line'>              
</span><span class='line'>              <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">responseHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BasicResponseHandler</span><span class="o">();</span>
</span><span class='line'>              <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">httpclient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httppost</span><span class="o">,</span>
</span><span class='line'>                      <span class="n">responseHandler</span><span class="o">);</span>
</span><span class='line'>              <span class="c1">// Parse</span>
</span><span class='line'>              <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
</span><span class='line'>              <span class="n">JSONArray</span> <span class="n">jArray</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">getJSONArray</span><span class="o">(</span><span class="s">&quot;posts&quot;</span><span class="o">);</span>
</span><span class='line'>              <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">mylist</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;&gt;();</span>
</span><span class='line'>
</span><span class='line'>              <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">jArray</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>                  <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
</span><span class='line'>                  <span class="n">JSONObject</span> <span class="n">e</span> <span class="o">=</span> <span class="n">jArray</span><span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span><span class='line'>                  <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;post&quot;</span><span class="o">);</span>
</span><span class='line'>                  <span class="n">JSONObject</span> <span class="n">jObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>                  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;idusers&quot;</span><span class="o">,</span> <span class="n">jObject</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;idusers&quot;</span><span class="o">));</span>
</span><span class='line'>                  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="n">jObject</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">));</span>
</span><span class='line'>                  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;fullname&quot;</span><span class="o">,</span> <span class="n">jObject</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;fullname&quot;</span><span class="o">));</span>
</span><span class='line'>
</span><span class='line'>                  <span class="n">mylist</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</span><span class='line'>              <span class="o">}</span>
</span><span class='line'>              <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="c1">// TODO Auto-generated catch block</span>
</span><span class='line'>              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="c1">// TODO Auto-generated catch block</span>
</span><span class='line'>              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>          <span class="c1">// Log.i(getClass().getSimpleName(), &quot;send  task - end&quot;);</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;Request failed: &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span>
</span><span class='line'>                  <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Data</span> <span class="o">{</span>
</span><span class='line'>      <span class="c1">// private List&lt;User&gt; users;</span>
</span><span class='line'>      <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// +getters/setters</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">static</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">String</span> <span class="n">idusers</span><span class="o">;</span>
</span><span class='line'>      <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
</span><span class='line'>      <span class="n">String</span> <span class="n">fullname</span><span class="o">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIdusers</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">idusers</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIdusers</span><span class="o">(</span><span class="n">String</span> <span class="n">idusers</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">this</span><span class="o">.</span><span class="na">idusers</span> <span class="o">=</span> <span class="n">idusers</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getFullname</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">fullname</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFullname</span><span class="o">(</span><span class="n">String</span> <span class="n">fullname</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">this</span><span class="o">.</span><span class="na">fullname</span> <span class="o">=</span> <span class="n">fullname</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>IP didalam file sesuaikan sama ip server anda, dan juga nama file php yang dibuat tadi</p></blockquote>

<h4>6 Buat java class baru &ldquo;StreamConverter.java&rdquo; mengubah data ke Stream agar dapat di tangkap di php.</h4>

<figure class='code'><figcaption><span> (StreamConverter.java)</span> <a href='/downloads/code/android/webserver_php/StreamConverter.java'>download</a></figcaption>
 <div class="highlight"><table><tr><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">ivans</span><span class="o">.</span><span class="na">php</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.HttpEntity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpGet</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.json.JSONArray</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StreamConverter</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">convertStreamToString</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="cm">/*</span>
</span><span class='line'><span class="cm">      * To convert the InputStream to String we use the</span>
</span><span class='line'><span class="cm">      * BufferedReader.readLine() method. We iterate until the BufferedReader</span>
</span><span class='line'><span class="cm">      * return null which means there&#39;s no more data to read. Each line will</span>
</span><span class='line'><span class="cm">      * appended to a StringBuilder and returned as String.</span>
</span><span class='line'><span class="cm">      */</span>
</span><span class='line'>      <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">is</span><span class="o">));</span>
</span><span class='line'>      <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">);</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">is</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*</span>
</span><span class='line'><span class="cm">  * This is a test function which will connects to a given rest service and</span>
</span><span class='line'><span class="cm">  * prints it&#39;s response to Android Log with labels &quot;Praeda&quot;.</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">connect</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">HttpClient</span> <span class="n">httpclient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// Prepare a request object</span>
</span><span class='line'>      <span class="n">HttpGet</span> <span class="n">httpget</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpGet</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// Execute the request</span>
</span><span class='line'>      <span class="n">HttpResponse</span> <span class="n">response</span><span class="o">;</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">response</span> <span class="o">=</span> <span class="n">httpclient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpget</span><span class="o">);</span>
</span><span class='line'>          <span class="c1">// Examine the response status</span>
</span><span class='line'>          <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Praeda&quot;</span><span class="o">,</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// Get hold of the response entity</span>
</span><span class='line'>          <span class="n">HttpEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
</span><span class='line'>          <span class="c1">// If the response does not enclose an entity, there is no need</span>
</span><span class='line'>          <span class="c1">// to worry about connection release</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="o">(</span><span class="n">entity</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>              <span class="c1">// A Simple JSON Response Read</span>
</span><span class='line'>              <span class="n">InputStream</span> <span class="n">instream</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="na">getContent</span><span class="o">();</span>
</span><span class='line'>              <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">convertStreamToString</span><span class="o">(</span><span class="n">instream</span><span class="o">);</span>
</span><span class='line'>              <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Praeda&quot;</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>              <span class="c1">// A Simple JSONObject Creation</span>
</span><span class='line'>              <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
</span><span class='line'>              <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Praeda&quot;</span><span class="o">,</span> <span class="s">&quot;&lt;jsonobject&gt;\n&quot;</span> <span class="o">+</span> <span class="n">json</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>
</span><span class='line'>                      <span class="o">+</span> <span class="s">&quot;\n&lt;/jsonobject&gt;&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>              <span class="c1">// A Simple JSONObject Parsing</span>
</span><span class='line'>              <span class="n">JSONArray</span> <span class="n">nameArray</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">names</span><span class="o">();</span>
</span><span class='line'>              <span class="n">JSONArray</span> <span class="n">valArray</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">toJSONArray</span><span class="o">(</span><span class="n">nameArray</span><span class="o">);</span>
</span><span class='line'>              <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">valArray</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>                  <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Praeda&quot;</span><span class="o">,</span>
</span><span class='line'>                          <span class="s">&quot;&lt;jsonname&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&quot;&gt;\n&quot;</span> <span class="o">+</span> <span class="n">nameArray</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
</span><span class='line'>                                  <span class="o">+</span> <span class="s">&quot;\n&lt;/jsonname&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&quot;&gt;\n&quot;</span> <span class="o">+</span> <span class="s">&quot;&lt;jsonvalue&quot;</span>
</span><span class='line'>                                  <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&quot;&gt;\n&quot;</span> <span class="o">+</span> <span class="n">valArray</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
</span><span class='line'>                                  <span class="o">+</span> <span class="s">&quot;\n&lt;/jsonvalue&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&quot;&gt;&quot;</span><span class="o">);</span>
</span><span class='line'>              <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>              <span class="c1">// A Simple JSONObject Value Pushing</span>
</span><span class='line'>              <span class="n">json</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;sample key&quot;</span><span class="o">,</span> <span class="s">&quot;sample value&quot;</span><span class="o">);</span>
</span><span class='line'>              <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;Praeda&quot;</span><span class="o">,</span> <span class="s">&quot;&lt;jsonobject&gt;\n&quot;</span> <span class="o">+</span> <span class="n">json</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>
</span><span class='line'>                      <span class="o">+</span> <span class="s">&quot;\n&lt;/jsonobject&gt;&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>              <span class="c1">// Closing the input stream will trigger connection release</span>
</span><span class='line'>              <span class="n">instream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="c1">// TODO Auto-generated catch block</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="c1">// TODO Auto-generated catch block</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="c1">// TODO Auto-generated catch block</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>7 activity_main.xml</h4>

<figure class='code'><figcaption><span> (activity_main.xml)</span> <a href='/downloads/code/android/webserver_php/activity_main.xml'>download</a></figcaption>
 <div class="highlight"><table><tr><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
</span><span class='line'>    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;Button</span>
</span><span class='line'>        <span class="na">android:id=</span><span class="s">&quot;@+id/Button01&quot;</span>
</span><span class='line'>        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;50dp&quot;</span>
</span><span class='line'>        <span class="na">android:onClick=</span><span class="s">&quot;clickbuttonRecieve&quot;</span>
</span><span class='line'>        <span class="na">android:text=</span><span class="s">&quot;@string/Button01&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/Button&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;Button</span>
</span><span class='line'>        <span class="na">android:id=</span><span class="s">&quot;@+id/Button02&quot;</span>
</span><span class='line'>        <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;50dp&quot;</span>
</span><span class='line'>        <span class="na">android:onClick=</span><span class="s">&quot;clickbuttonSent&quot;</span>
</span><span class='line'>        <span class="na">android:text=</span><span class="s">&quot;@string/Button02&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/Button&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/LinearLayout&gt;</span>
</span></code></pre></td></tr></table></div></figure>




</article>




	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=597527150322328&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <section>
    <h1 class="indent title">Comments</h1>
    <div id="facebook_comments" aria-live="polite">
      <noscript>Please enable JavaScript to view the comments powered by facebook</a></noscript>
<div
  class="fb-comments"
  data-href="http://ivansa.github.io/android/php/android-with-webserver-php/"
  data-num-posts="2"
  data-width=""
  data-colorscheme="light" ></div>

    </div>
  </section>


        
        </div>
        
        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  
<section class="social aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">
    Stalk me!
  </h1>
  <ul class="unstyled">
    
    
    <li><a class="github" href="//github.com/ivansa"><i class="icon-github"></i> Github</a></li>
    <li><a class="facebook" href="//facebook.com/vaansaa"><i class="icon-facebook-sign"></i> Facebook</a></li>
    <li><a class="gplus" href="//plus.google.com/110834282881538125936"><i class="icon-google-plus-sign"></i> Google+</a></li>
    
    
    
    <li><a class="twitter" href="//twitter.com/ivans_A"><i class="icon-twitter"></i> Twitter</a></li>
    
  </ul>
</section>



  <!--<section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      <li class="post">
        <a href="/tulisan/layanan-telematika/">Layanan Telematika</a>
      </li>
    
      <li class="post">
        <a href="/tulisan/customer-relationship-management/">Customer Relationship Management</a>
      </li>
    
      <li class="post">
        <a href="/tulisan/enterprise-resource-planning/">Enterprise Resource Planning</a>
      </li>
    
      <li class="post">
        <a href="/tulisan/arsitektur-telematika/">Arsitektur Telematika</a>
      </li>
    
      <li class="post">
        <a href="/tulisan/supply-chain-management/">Supply Chain Management</a>
      </li>
    
  </ul>
</section>
-->
<section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided" id="categories">
    <li class='post'><a href='/blog/categories/android'>android</a></li><li class='post'><a href='/blog/categories/cobol'>cobol</a></li><li class='post'><a href='/blog/categories/cpp'>cpp</a></li><li class='post'><a href='/blog/categories/ilmu-budaya-dasar'>ilmu_budaya_dasar</a></li><li class='post'><a href='/blog/categories/ilmu-sosial-dasar'>ilmu_sosial_dasar</a></li><li class='post'><a href='/blog/categories/java'>java</a></li><li class='post'><a href='/blog/categories/komputer'>komputer</a></li><li class='post'><a href='/blog/categories/linux'>linux</a></li><li class='post'><a href='/blog/categories/octopress'>octopress</a></li><li class='post'><a href='/blog/categories/pascal'>pascal</a></li><li class='post'><a href='/blog/categories/pembelajaran'>pembelajaran</a></li><li class='post'><a href='/blog/categories/php'>php</a></li><li class='post'><a href='/blog/categories/qbasic'>qbasic</a></li><li class='post'><a href='/blog/categories/tulisan'>tulisan</a></li><li class='post'><a href='/blog/categories/windows-microsoft'>windows_microsoft</a></li>
  </ul>
</section>
<section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Monthly Archives</h1>
  <script>function show_months(x){$("#month_ul_"+x).toggle(500);}</script><div class="monthly_archive"><ul class="year_list divided"><li class="year" style="text-decoration: none" onclick="show_months(2016)">2016 (14)<ul class="month_list" style="display: none;list-style-type: square;" id="month_ul_2016"><li class="month"><a href='/2016/11/'>November (3)</a></li><li class="month"><a href='/2016/10/'>October (5)</a></li><li class="month"><a href='/2016/04/'>April (2)</a></li><li class="month"><a href='/2016/03/'>March (2)</a></li><li class="month"><a href='/2016/01/'>January (2)</a></li></ul></li><li class="year" style="text-decoration: none" onclick="show_months(2015)">2015 (20)<ul class="month_list" style="display: none;list-style-type: square;" id="month_ul_2015"><li class="month"><a href='/2015/12/'>December (1)</a></li><li class="month"><a href='/2015/10/'>October (1)</a></li><li class="month"><a href='/2015/06/'>June (6)</a></li><li class="month"><a href='/2015/05/'>May (1)</a></li><li class="month"><a href='/2015/04/'>April (5)</a></li><li class="month"><a href='/2015/03/'>March (6)</a></li></ul></li><li class="year" style="text-decoration: none" onclick="show_months(2014)">2014 (38)<ul class="month_list" style="display: none;list-style-type: square;" id="month_ul_2014"><li class="month"><a href='/2014/12/'>December (6)</a></li><li class="month"><a href='/2014/11/'>November (10)</a></li><li class="month"><a href='/2014/10/'>October (3)</a></li><li class="month"><a href='/2014/09/'>September (1)</a></li><li class="month"><a href='/2014/05/'>May (2)</a></li><li class="month"><a href='/2014/04/'>April (9)</a></li><li class="month"><a href='/2014/03/'>March (2)</a></li><li class="month"><a href='/2014/02/'>February (3)</a></li><li class="month"><a href='/2014/01/'>January (2)</a></li></ul></li><li class="year" style="text-decoration: none" onclick="show_months(2013)">2013 (15)<ul class="month_list" style="display: none;list-style-type: square;" id="month_ul_2013"><li class="month"><a href='/2013/11/'>November (12)</a></li><li class="month"><a href='/2013/10/'>October (1)</a></li><li class="month"><a href='/2013/07/'>July (2)</a></li></ul></li></ul></div>
</section>
<!--
<section id="github-repos" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">
    GitHub Repos
    
    <small class="pull-right">
      <a class="btn" href="//github.com/ivansa" title="@ivansa on GitHub" target="_blank">
        <i class="icon-external-link"></i>
      </a>
    </small>
    
  </h1>
  <ul id="gh_repos" class="divided">
    <li class="loading">
      <i class="icon-spinner icon-spin"></i>
    </li>
  </ul>
</section>

-->



</div>

        </aside>
        
      </div>
    </div>
    
    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <p class="copyright">
  All content by Ivans Ardiansyah and licenced under <a href="//creativecommons.org/licenses/by-nc-sa/3.0/ie/">Creative Commons</a>.<br>
  Code under <a href="//github.com/coogie/oscailte/blob/master/README.md">MIT Licence</a>.
</p>
    </div>
  </div>
</div>

    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="/javascripts/libs/cryptojs_3_1_2/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>













  </body>
</html>